$Id: genconf-howto,v 1.2 2003/06/06 12:15:05 root Exp $

A TFTP server is ran on name1.lunarhosting.net and is accessible solely to 
the FastMonster networks and the loopback network for the router. The tftp
daemon's root is located at /usr/local/tftp_dir

Within this root there are two directories
  - ciscocode
  - genconf

Ciscocode holds the production code being used by each of the cisco devices
on the Lunar Hosting network.

Genconf holds the configuration files for each cisco device on the network
along with several other files. Configuration files are the ONLY world 
readable files. These files are characterized with '-tftp' as their suffix.

Each configuration file also has a corresponding 'macro' file. This is a file
that is composed of simple param=value lines that are used to generate a full
cisco configuration. The configuration itself is generated by running the 
perl script called 'genconf.pl' which is also located within the genconf 
directory. To create a configuration for the 'gateway' router, you would run

  ./genconf.pl gateway

This will create/update the gateway-tftp file will any changes made to the
gateway macro file. You would then send this gateway-tftp file to the router
by logging into the router and loading the file using 'copy tftp run'

The '-tftp' files should NEVER be hand edited.

PANCHO
As an alternative to logging into a device to perform a 'copy tftp run'
you may also (as root) use pancho to send and receive configurations to 
and from a remote host.

To download a configuration:

  pancho --download --pre --post

  This will bring the current running configuration from all cisco devices
  to name1 in the /usr/local/tftp_dir/complete directory

To upload a configuration (send a config to the device)

  pancho --upload --host gateway.lunarhosting.net \
         --file genconf/gateway.lunarhosting.net-tftp

and for the switch

  pancho --upload --host backbone.lunarhosting.net \
         --file genconf/backbone.lunarhosting.net-tftp
